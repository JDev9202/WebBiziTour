<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Malaga BiziTour Agreement Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
  <style>
    :root {
      --primary-start: #0066cc;
      --primary-end:   #00cc99;
      --primary:       #0066cc;
      --primary-light: #3399ff;
      --accent:        #ff6f61;
      --bg-overlay:    rgba(0, 0, 0, 0.3);
      --bg-gradient:   linear-gradient(135deg, #e0f7fa, #e8eaf6);
      --card-bg:       rgba(255, 255, 255, 0.9);
      --text:          #202124;
      --muted:         #666666;
      --radius:        12px;
      --spacing:       1rem;
      --shadow-light:  0 4px 16px rgba(0,0,0,0.1);
      --shadow:        0 10px 30px rgba(0,0,0,0.1);
      --transition:    0.3s ease;
    }
    *, *::before, *::after { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background: url('gavia-XCWIec2ySp4-unsplash.jpg') no-repeat center center fixed;
      background-size: cover;
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 2rem;
      min-height: 100vh;
      animation: backgroundFade 15s ease-in-out infinite alternate;
    }

    @keyframes backgroundFade {
      from { filter: brightness(100%); }
      to { filter: brightness(90%); }
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 100%;
      max-width: 640px;
      overflow: hidden;
      animation: fadeInUp 0.7s ease-out;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      background: linear-gradient(45deg, var(--primary-start), var(--primary-end));
      padding: var(--spacing);
      text-align: center;
      color: #fff;
      animation: pulseHeader 3s infinite alternate;
    }

    @keyframes pulseHeader {
      from { filter: brightness(1); }
      to   { filter: brightness(1.2); }
    }

    .header img {
      max-width: 100px;
      margin-bottom: 0.5rem;
      animation: floatLogo 4s ease-in-out infinite;
    }

    @keyframes floatLogo {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .header h2 {
      font-weight: 700;
      margin: 0;
      font-size: 1.75rem;
    }

    #intro {
      padding: var(--spacing);
      text-align: center;
    }

    #intro h2 {
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    #intro p {
      color: var(--muted);
      line-height: 1.5;
    }

    .btn-group {
      display: flex;
      justify-content: center;
      gap: var(--spacing);
      margin-top: var(--spacing);
    }

    .btn {
      background: var(--primary);
      color: #fff;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--radius);
      font-size: 1rem;
      cursor: pointer;
      transition: all var(--transition);
    }

    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .btn:not(:disabled):hover {
      background: var(--primary-light);
      transform: translateY(-2px);
    }

    #form-container {
      display: none;
      padding: var(--spacing);
    }

    form {
      display: flex;
      flex-direction: column;
      animation: fadeInUp 0.5s ease-in-out;
    }

    .participant {
      background: #f9f9f9;
      border-radius: var(--radius);
      border: 1px solid #eee;
      margin-bottom: var(--spacing);
      padding: var(--spacing);
      position: relative;
      transition: transform var(--transition);
      animation: fadeInUp 0.5s ease-out;
    }

    .participant:hover {
      transform: translateY(-3px);
    }

    .participant h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .form-group {
      margin-bottom: var(--spacing);
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      font-size: 1rem;
      transition: border-color var(--transition), box-shadow var(--transition);
    }

    input:focus {
      outline: none;
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
    }

    input:invalid {
      border-color: red;
    }
<<<<<<< HEAD
    .participant:hover { transform: translateY(-5px); }
    .participant h3 { margin-top: 0; color: var(--primary); }
    .remove-participant-btn {
      position: absolute; top: var(--spacing); right: var(--spacing);
      background: #ff4d4d; color: #fff; border: none;
      border-radius: var(--radius); padding: 0.25rem 0.5rem;
      font-size: 0.8rem; cursor: pointer; transition: background var(--transition);
    }
    .remove-participant-btn:hover { background: #e60000; }
    .form-group { margin-bottom: var(--spacing); }
    label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
    input[type="text"], input[type="email"], input[type="tel"], input[type="date"] {
      width: 100%; padding: 0.75rem; border: 1px solid #ddd;
      border-radius: var(--radius); font-size: 1rem;
      transition: border-color var(--transition);
    }
    input:focus { outline: none; border-color: var(--primary-light); }
    input:invalid { border-color: red; }

    /* ESTILO DEL ACUERDO */
    #agreement-content {
=======

    .agreement-content {
>>>>>>> f58b973 (Testing)
      background: #fff;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      padding: var(--spacing);
      max-height: 240px;
      overflow-y: auto;
      margin-bottom: var(--spacing);
      line-height: 1.5;
<<<<<<< HEAD
    }
    #agreement-content.disabled {
      pointer-events: none;
      opacity: 0.6;
    }
    #agreement-content h4 {
      margin-top: 1rem;
      margin-bottom: 0.5rem;
      color: var(--primary);
      font-weight: 600;
    }
    #agreement-content p,
    #agreement-content li {
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .checkbox-group { display: flex; align-items: center; gap: 0.5rem; margin-bottom: var(--spacing); }

    /* Canvas signature: solo touch-action */
=======
      animation: fadeIn 1s ease-in-out;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: var(--spacing);
    }

>>>>>>> f58b973 (Testing)
    canvas.signature-pad {
      width: 100%;
      height: 150px;
      border: 1px solid #ddd;
      border-radius: var(--radius);
      background: #fff;
      touch-action: none;
    }

    .signature-buttons {
      display: flex;
      gap: var(--spacing);
      margin-top: 0.5rem;
    }

    #thankyou-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }

    #thankyou-modal .modal-content {
      background: #fff;
      border-radius: var(--radius);
      padding: var(--spacing);
      max-width: 400px;
      text-align: center;
      box-shadow: var(--shadow);
      animation: popIn 0.5s ease;
    }
<<<<<<< HEAD
=======

    @keyframes popIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    @media (max-width: 600px) {
      body { padding: 1rem; }
      .card { margin: 0.5rem; }
      .btn-group { flex-direction: column; }
    }
  
    .remove-participant-btn {
  position: absolute;
  top: 0.75rem;
  right: 0.75rem;
  background: transparent;
  border: none;
  color: #ff4d4d;
  font-size: 1.2rem;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s ease, color 0.2s ease;
  padding: 0.25rem;
  border-radius: 50%;
}

.remove-participant-btn:hover {
  color: #fff;
  background: #ff4d4d;
  transform: scale(1.1);
}

 /* Más espacio entre los dos botones del formulario */
#add-participant-btn {
  margin-bottom: var(--spacing);
}

/* Contenedor de input + spinner + check */
.upload-wrapper {
  position: relative;
  display: inline-block;
}

/* Oculto por defecto */
.upload-spinner,
.upload-check {
  position: absolute;
  top: 50%;
  right: 0.5rem;
  transform: translateY(-50%);
  font-size: 1.2rem;
  display: none;
}

/* Spinner animado (simple) */
.upload-spinner {
  border: 2px solid transparent;
  border-top: 2px solid var(--primary);
  border-radius: 50%;
  width: 1rem;
  height: 1rem;
  animation: spin 0.8s linear infinite;
}
@keyframes spin {
  to { transform: translateY(-50%) rotate(360deg); }
}

/* Check verde */
.upload-check {
  color: #28a745;
  font-weight: bold;
}


>>>>>>> f58b973 (Testing)
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <img src="bicitourlogo.png" alt="BiziTour Málaga Logo">
      <h2>Malaga BiziTour Agreement Form</h2>
    </div>
    <div id="intro">
      <h2>Welcome to BiziTour Málaga!</h2>
      <p>We're delighted to provide you with a bicycle tour to explore our beautiful city. To ensure a smooth and enjoyable experience, please review and agree to the following terms:</p>
      <button id="next-btn">Next</button>
    </div>
    <div id="form-container">
      <button type="button" id="back-btn" class="btn" style="margin-bottom: 1rem;">← Back</button>
      <form id="form">
        <div id="participants-container"></div>
        <button type="button" id="add-participant-btn" class="btn" disabled>Add Participant</button>
        <button type="submit" class="btn" disabled>Submit All</button>
      </form>
    </div>
  </div>

  <!-- Plantilla de participante -->
  <template id="participant-template">
    <div class="participant">
      <h3>Participant <span class="index"></span></h3>
      <button type="button" class="remove-participant-btn" title="Remove">
        ✖
      </button>      
      <div class="form-group"><label>First Name</label><input type="text" name="firstName" required></div>
      <div class="form-group"><label>Last Name</label><input type="text" name="lastName" required></div>
      <div class="form-group"><label>Email</label><input type="email" name="email" required></div>
      <div class="form-group">
        <label>Phone</label>
        <input type="tel" name="phone" inputmode="tel" placeholder="+34 600123456"
               pattern="^\+?[0-9 ]{7,15}$" required>
      </div>
      <div class="form-group"><label>Date</label><input type="date" name="date" required></div>
<<<<<<< HEAD
      <div class="form-group">
        <div id="agreement-content">
          <h4>BICYCLE TOUR PARTICIPATION AGREEMENT</h4>
          <p>This agreement governs participation in a bike tour organized by <strong>BIZITOUR</strong>, a trademark of Digoo Design S.L. (CIF: B67988410), hereinafter referred to as "the Organizer," and the participant, hereinafter referred to as "the Client."</p>
          <h4>1. Purpose of the Agreement</h4>
          <p>The Client agrees to participate in a guided bike tour organized by the Organizer, which includes the use of a bicycle, helmet, and accessories (if applicable). The tour details, including route and duration, have been communicated in advance.</p>
          <h4>2. Client Responsibilities</h4>
          <ul>
            <li>Follow the guide’s instructions at all times.</li>
            <li>Use the safety equipment provided.</li>
            <li>Respect traffic laws and act prudently during the tour.</li>
            <li>Assume responsibility for any damages caused to third parties, the equipment, or themselves due to negligence or failure to comply with regulations.</li>
          </ul>
          <h4>3. Organizer Responsibilities</h4>
          <ul>
            <li>Ensure that bicycles and accessories are in optimal condition.</li>
            <li>Provide a qualified guide to lead the tour safely.</li>
            <li>Provide assistance in case of mechanical issues or problems during the tour.</li>
          </ul>
          <h4>4. Liability Waiver</h4>
          <ul>
            <li>The Organizer shall not be held responsible for injuries, accidents, or damages caused by the Client’s negligence.</li>
            <li>Loss of personal belongings during the tour.</li>
            <li>Tour cancellations or modifications due to adverse weather conditions or force majeure.</li>
          </ul>
          <h4>5. Cancellations and Refunds</h4>
          <ul>
            <li>Cancellations by the Client made at least 48 hours in advance are eligible for a full refund.</li>
            <li>Cancellations made less than 48 hours in advance will not be refunded.</li>
            <li>The Organizer reserves the right to modify or cancel the tour for safety reasons, offering rescheduling or a refund.</li>
          </ul>
          <h4>6. Data Protection</h4>
          <p>The Client agrees to the use of their personal data solely for the management of the tour, in compliance with GDPR regulations.</p>
          <h4>7. Jurisdiction</h4>
          <p>This agreement is governed by the laws of Spain, with both parties submitting to the courts of the Organizer's registered location.</p>
          <p><em>"By signing this agreement, the undersigned represents and accepts responsibility for the entire group of participants, who agree to abide by the terms herein."</em></p>
          <h4>8. Group Participation Clause</h4>
          <p>In the case of group tours, the Group Leader signs this agreement on behalf of all participants, certifying that they have been informed of and agree to the stated terms. The Group Leader assumes responsibility for any violations by the group members. A participant list must be provided to the organizer, and if required, each member may sign their individual acceptance separately.</p>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" name="agree" disabled>
          <label>I have read and agree to the Terms &amp; Conditions</label>
        </div>
=======
      <!--Campos solo del Rent-->
<div class="rent-only" style="display: none;">
  <!-- Return Date & Time -->
  <div class="form-group">
    <label>Return Date &amp; Time</label>
    <input type="datetime-local" name="returnDateTime" required />
  </div>

  <!-- You will be Renting the following items -->
  <fieldset class="form-group">
    <legend>You will be Renting the following items:</legend>

    <div class="form-group">
      <label>Vintage Bicycle Qty</label>
      <input type="number" name="vintageBicycleQty" min="0" />
    </div>
    <div class="form-group">
      <label>Vintage E‑Bike Qty</label>
      <input type="number" name="vintageEBikeQty" min="0" />
    </div>
    <div class="form-group">
      <label>Lock Qty</label>
      <input type="number" name="lockQty" min="0" />
    </div>
    <div class="form-group">
      <label>Helmet Qty</label>
      <input type="number" name="helmetQty" min="0" />
    </div>

 <!-- Dentro de .rent-only, justo antes de la validación del agreement -->
 <div class="form-group id-upload-group">
  <label for="idPhoto">Foto DNI <span class="required">*</span></label>
  <div class="upload-wrapper">
    <input 
      type="file" 
      id="idPhoto" 
      name="idPhoto" 
      accept="image/*" 
      capture="environment" 
      required 
    />
    <div class="upload-spinner" aria-hidden="true"></div>
    <div class="upload-check"  aria-hidden="true">✔</div>
  </div>
</div>
  </fieldset>
</div>

      <div class="form-group">
        <div class="agreement-content"></div>
        <div class="form-group">
          <div class="form-group">
            <label style="display: inline-flex; align-items: center; gap: 0.5rem; white-space: nowrap;">
              <input type="checkbox" name="agree" disabled>
              I have read and agree to the Terms &amp; Conditions
            </label>
          </div>
>>>>>>> f58b973 (Testing)
      </div>
      <div class="form-group">
        <label>Signature</label>
        <canvas class="signature-pad"></canvas>
        <div class="signature-buttons">
          <button type="button" class="btn confirm-signature-btn" disabled>Confirm Signature</button>
          <button type="button" class="btn clear-signature-btn" disabled>Clear Signature</button>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal de agradecimiento -->
  <div id="thankyou-modal" class="flex">
    <div class="modal-content">
      <h3>Your information was successfully submitted. Thanks!</h3>
      <div class="modal-buttons">
        <button id="finish-btn" class="btn">Finish</button>
      </div>
    </div>
  </div>
  <script src="/js/main.js" defer></script>
</body>
</html>
   